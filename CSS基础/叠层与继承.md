### CSS中的选择器特异度的概念和计算方法

我们知道文档中的一个元素可能同时被多个css选择器选中，每个选择器都有一些css规则，这就是层叠。这些规则有可能不矛盾的，自然这些规则将会同时起效，然而有些规则是相互冲突的, 为此需要为每条规则制定特殊性，当发生冲突的时候必须选出一条最高特殊性的规则来应用。特殊性的值表述为4个部分：0，0，0，0。

- 一个选择器的具体特殊性如下确定：
  1. 对于内联样式为：1，0，0，0。
  2. 对于选择器中的ID属性值，加0，1，0，0。
  3. 对于选择器中的类属性值、属性选择、或伪类，加0，0，1，0。
  4. 对于选择器中的元素和伪元素，加0，0，0，1。
  5. 通配符选择器（*），加0，0，0，0。

特殊属性计算值：

```css
h1 {color: red;}/*specificity=0,0,0,1*/
p em {color:purple;}/*specificity=0,0,0,2*/
.grade{color:purple;}/*specificity=0,0,1,0*/
*.bright{color:yellow;}/*specificity=0,0,1,0*/
div#header [href]{color:black;}/*specificity=0,1,1,1 包涵一个属性选择器*/
```

- 如下例子，当不同的CSS选择器都选中了某一个元素，那么哪条规则生效呢？

```html
  <!-- HTML -->
  <article>
    <h1 class="title">我是一级标题</h1>
  </article>
  
  <!-- CSS -->
  <style>
    .title {
      color: blue;
    }
    article h1 {
      color: red;
    }
  </style>

// .title 等级是0010
// article h1等级是0002
// 因此 颜色为blue
```

- CSS中通过特异度来解决样式的冲突，特异度的概念是指，当有两个或者以上拥有相同重要性的css选择器里的声明代码要应用于同一个元素来改变其相同的属性的时候，则特异度最高的选择器的声明代码将优先应用于该元素。CSS特异度示例如下：

![](C:\Users\lenovo\Desktop\文档\CSS基础\CSS特异度.jpg)

简单选择器的特异度级别：（级别越高，优先级越高）

- Level 0：*
- Level 1：标签选择器、伪元素
- Level 2：类、伪类、伪元素
- Level 3：id
- Level 4：内联

- 样式的覆盖规则：
  - 根据引入方式确定优先级：优先级由高到低依次为：“内联属性”——>“嵌入”——>“外链”
  - 在同一级别后写的属性覆盖先写的：即就是在文件上代码行号更高的优先级更高
  - 加有“！important”的样式，优先级最高：即无论哪一种情况，只要在样式上加了important,那么该样式的优先级最高。
- CSS样式的来源主要以下三方面：
  - 浏览器对HTML定义的默认样式。
  - 用户定义的样式。
  - 开发者定义的样式，可以有三种形式：
    1. 定义在外部文件（外链样式）：本教程中案例主要是通过这种形式定义样式。
    2. 在页面的头部定义（内联样式）：通过这种形式定义的样式只在本页面内生效。
    3. 定义在特定的元素身上（行内样式）：这种形式多用于测试，可维护性较差。

用户定义的样式表会覆盖浏览器定义的默认样式，然后网页开发者定义的样式又会覆盖用户样式。作为网页的开发者只需要关注开发者样式。

- 那么具体是哪条声明起作用呢？规则如下：
  - <mark>找出匹配到的该属性所有声明</mark>
  - <mark>根据规则来源，优先级从低到高：</mark>
    1. 浏览器预设
    2. 用户设置
    3. 页面开发者
    4. 含 !important 的网页样式
    5. 含 !important 的用户设置样式
  - <mark>同一来源中，按照特异度排序，越特殊优先级越高</mark>
  - <mark>特异度一样时，按照样式书写顺序，后面的优先级高</mark>
- 初始值，在CSS中，每个属性都有一个初试值，background-color 的初始值为 transparent，margin-left 的初始值为 0，当然我们也可以将改变过后的值显式的重置为初识值，比如：background-color: initial